<hi:Common_ClearHeader runat="server" />
<link href="/style/PicOrder.css" rel="stylesheet" />
<link href="/templates/vshop/common/src/FontAwesome/css/font-awesome.min.css" rel="stylesheet" />
<link href="/templates/vshop/common/src/swiper.min.css" rel="stylesheet" />
<script src="/templates/vshop/common/src/fastclick.min.js" type="text/javascript"></script>
<script src="/templates/vshop/common/src/swiper.min.js" type="text/javascript"></script>
<script src="/templates/vshop/common/src/fastclick.min.js" type="text/javascript"></script>

<script src="/script/PicOrder/PicOrderPro.js?v=3" type="text/javascript"></script>
<style type="text/css">
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -moz-box-sizing: border-box;
      -webkit-box-sizing: border-box;
    }
    li {
      list-style: none;
    }
    img {
      border: none;
    }
    input,
    select,
    textarea {
      outline: none;
    }
    textarea {
      resize: none;
    }
    a {
      text-decoration: none;
      color: #101010;
    }
    html {
      font-size: 16px;
    }
    body {
      -webkit-text-size-adjust: 100%;
      -ms-text-size-adjust: 100%;
      text-size-adjust: 100%;
      color: #000;
      background: #F0F0F2;
      font: normal 1rem/1 Helvetica, STHeiti, "Microsoft YaHei", Verdana, Arial, Tahoma, sans-serif;
      overflow-x: hidden;
      margin: 0 auto;
      margin-bottom: 67px;
    }
    img {
      width: 100%;
      vertical-align:middle;
    }
    .banner{
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 10;
    }
    .content{
        position:relative;
        padding-top:8rem;
        background:#121212;
        overflow:hidden;
    }
    @media screen and (min-width:650px){
        .content{
            padding-top:12.45rem;
        }
    }
    @media screen and (max-width:414px){
        .content{
            padding-top:11.3rem;
        }
    }
    @media screen and (max-width:375px){
        .content{
            padding-top:11.55rem;
        }
    }
    @media screen and (max-width:320px){
        .content{
            padding-top:11.9rem;
        }
    }
    #categoryList{
        float:left;
        width:20%;
        position:relative;
    }
    #categoryList::after{
        content: '';
        position: absolute;
        width: 100%;
        height: 100%;
        box-shadow: -3px 0px 10px #656565 inset;
        -webkit-box-shadow: -3px 0px 10px #656565 inset;
        top: 0;
        left:0;
        pointer-events: none;
    }
    #categoryList li{
        position: relative;
        height:85px;
        padding: 1rem 1rem 1rem 1.5rem;
        font-size: 14px;
        border-bottom: 1px solid #969696;
        border-right: 1px solid #969696;
        color: #413d3a;
        background: #a3a3a3;
    }
    #categoryList li a{
        position: absolute;
        font-size: 16px;
        letter-spacing: 3px;
        width: 38px;
        line-height: 20px;
        top: 50%;
        left: 50%;
        word-break: break-all;
        transform: translate(-50%,-50%);
        -webkit-transform: translate(-50%,-50%);
    }
    #categoryList li.activeLi a{
        color:#fcecb1;
    }
    #goodsList{
        float:right;
        width:80%;
    }
    #goodsList .title{
        font-size: 12px;
        border-left: 5px solid #5b5d61;
        line-height: 20px;
        padding: 0 5px;
    }
    #goodsList ul li{
        position:relative;
        margin-bottom:5px;
    }
    #goodsList ul li .imgbox{
        position:relative;
        width:100%;
        height:200px;
        overflow:hidden;
    }
    #goodsList ul li .imgbox img{
        position:absolute;
        width:110%;
        top:50%;
        left:50%;
        transform:translate(-50%,-50%);
        -webkit-transform:translate(-50%,-50%);
    }
    #goodsList ul li .productInfo{
        position:absolute;
        right:0;
        left:0;
        bottom:0;
        background:rgba(0,0,0,0.5);
    }
    #goodsList ul li .productInfo p{
        padding:20px;
        font-size:16px;
        color: #fcecb1;
    }
    #goodsList ul li .productInfo p span{
        float:right;
        padding-right: 25px;
        background:url(../images/ad/standard.png) right center no-repeat;
    }
    .mask,.imgGroupBoxMask{
        display:none;
        position:fixed;
        top:0;
        left:0;
        right:0;
        bottom:0;
        background:#000;
        z-index:11;
    }
    .mask{
        opacity:0.5;
        filter:alpha(opacity=50);
    }
    .imgGroupBox{
        display:none;
        position:fixed;
        left:0;
        right:0;
        top:0;
        bottom:0;
        z-index:12;
    }
    .imgGroupBox .swiper-container{
        height:100%;
    }
    .imgGroupBox .swiper-slide img{
        position:relative;
        top:50%;
        transform:translateY(-50%);
        -webkit-transform:translateY(-50%);
    }
    .imgGroupBox .swiper-pagination-bullet{
        background:#fff;
    }
    .imgGroupBox .swiper-container-horizontal>.swiper-pagination-bullets,
    .imgGroupBox .swiper-pagination-custom,
    .imgGroupBox .swiper-pagination-fraction{
        bottom:37px;
    }
    .ctrlbar{
            position: absolute;
            bottom: 30px;
            left: 0;
            z-index: 99;
            width: 100%;
            line-height: 30px;
            text-align: center;
            color: #fff;
    }
    .ctrlbar span{
        display: block;
        width: 72px;
        height: 30px;
        line-height: 30px;
        text-align: center;
        font-size: 16px;
        color: #fff;
        background: rgba(128,128,128,.4);
        -webkit-box-shadow: 0 0 1px rgba(0,0,0,.3) inset;
        box-shadow: 0 0 1px rgba(0,0,0,.3) inset;
        border-radius: 2px;
        -webkit-border-radius: 2px;
        float: left;
        margin: 0 0 0 15px;
    }
    #skuSelectorDiv{
        position:fixed;
        width: 100%;
        background-color:#121212;
        z-index:102;
    }
    #skuSelectorDiv ul{
        overflow:hidden;
    }
    #skuSelectorDiv ul li{
        color:#fcecb1;
        border-top:1px solid #252525;
        overflow:hidden;
    }
    #skuSelectorDiv ul li:first-child{
        padding:1rem;
        position:relative;
        text-align:left;
        overflow:hidden
    }
    #skuSelectorDiv ul li:first-child .imgbox{
        float:left;
        width:5rem;
        height:5rem;
        margin-right:1rem;
        vertical-align: bottom;
    }
    #skuSelectorDiv ul li:first-child .imgbox img{
        height:100%;
    }
    #skuSelectorDiv ul li:first-child a{
        position: absolute;
        width:3rem;
        height:3rem;
        line-height:3rem;
        text-align:center;
        right: 0;
        top: 0;
        font-size: 1.8rem;
        color: #858585;
    }
    #skuSelectorDiv ul li:first-child .infobox{
        position: absolute;
        top: 2.5rem;
        width: 60%;
        margin-left: 6.5rem;
    }
    #skuSelectorDiv ul li:first-child div p{
        white-space:nowrap;
        text-overflow:ellipsis;
        overflow:hidden;
        font-size:16px;
        color:#fff;
    }
    #skuSelectorDiv ul li:first-child div p:last-child{
        color:#fff;
    }
    .spec_title{
        color:#4d4d4d;
        background: #d1d1d1;
        font-size: 16px;
        padding:1rem;
        text-align:center;
    }
    .spec-kind div{
        padding: 1.5rem 1rem;
        background-image:url(../images/ad/choose.png);
        background-position:95% center;
        background-repeat:no-repeat;
    }
    .spec-kind>div{
        border-bottom:1px solid #252525;
    }
    .spec-kind>div:last-child{
        border-bottom:0;
    }
    .spec-kind div.selected{
        color:#fff;
        background-color:#000;
        background-image:url(../images/ad/choosed.png);
    }
    #skuSelectorDiv .count{
        padding: 1.5rem 1rem;
        text-align:center;
    }
    #skuSelectorDiv .count div{
        display: inline-block;
        border-radius: .25rem;
        font-size: 2rem;
        color: #868686;
        position:relative;
        overflow: hidden;
    }
    #skuSelectorDiv .count div input{
        display: none;
        width: 50%;
        height: 2.5rem;
        text-align: center;
        vertical-align: top;
        font-size: 1.36rem;
        color: #FAEAAF;
        border: 0;
        border-radius: 0;
        background: #32353A;
    }
    #skuSelectorDiv .count div span{
        display: inline-block;
        width: 7rem;
        height: 50px;
        line-height: 44px;
        color: #121212;
        background: #121212;
    }
    #skuSelectorDiv .count div span:first-child{
        display:none;
    }
    #skuSelectorDiv .count div span:last-child:after{
        content: '加入购物车';
        position: absolute;
        top: 0;
        left: 0;
        bottom: 1px;
        right: 0px;
        font-size: 15px;
        background: #121212;
        color: #FCECB1;
        border: 3px solid #A79A84;
        border-radius: 10px;
        z-index: 2;
    }
    .shopping_cart a{
        display:inline-block;
        width: 40%;
        height:2rem;
        line-height:2rem;
        color:#fff;
        margin:0 5%;
        border-radius: .25rem;
    }
    .shopping_cart a:first-child{
        background-color:#ff7803;
    }
    .shopping_cart a:last-child{
        background-color:#fc1b00;
    }
    .shopCart{
        position:fixed;
        left:0;
        right:0;
        bottom:0;
        padding:10px;
        background: #000;
        z-index:2;
    }
    .shopCart .count{
        float:left;
        width:51px;
        height:47px;
        padding:0 5px;
        border: 3px solid #A79A84;
        border-radius: 10px;
        position:relative;
    }
    .shopCart .count .fa{
        font-size:24px;
    }
    .shopCart .count .num{
        position:absolute;
        width:15px;
        height:15px;
        line-height:15px;
        text-align:center;
        top:1px;
        right:1px;
        border-radius:100%;
        font-size:10px;
        color: #000;
        background: #A79A84;
    }
    .shopCart .total{
        float:left;
        margin:8px 5px 0 15px;
        width: 30px;
        vertical-align: middle;
    }
    .shopCart .price{
        margin:0 5px;        
    }
    .shopCart .price,span[role=freeRoadPrice]{
        float: left;
        color: #cabd8e;
        line-height:38px;
        font-size:18px;
    }
    span[role=freeRoadPrice]{
        font-size:15px;    
    }
    .shopCart .price i{
        font-style:normal;
    }
    .shopCart .order{
        float: right;
        width: 59px;
        font-size: 15px;
        line-height: 40px;
        text-align: center;
        color: #cabd8e;
        border: 3px solid #A79A84;
        border-radius: 10px;
        margin-top: 1px;
    }
    .shopCart .unOrder{
        color: #484848;
        border: 3px solid #484848;    
    }
    .chooseDetail{
        position:fixed;
        left:0;
        right:0;
        bottom:0;
        color:#fff;
        background: #32353a;
        border-top:1px solid #252525;
        z-index:3;
    }
    .chooseDetail .closeDiv{
        position: absolute;
        right: 0;
        top: 0;
        width: 60px;
        height: 33px;
        line-height: 33px;
        text-align: center;
        color: #fcecb1;
        background: #252525;
    }
    .chooseDetail .numPrice{
        padding:10px 20px;
        color:#fff;
        font-size:12px;
        border-bottom: 1px solid #252525;
    }
    .chooseDetail .delivery{
        padding:1rem;
    }
    .chooseDetail .delivery span{
        float:right;
    }
    .chooseDetail .delivery span i{
        font-style:normal;
    }
    .chooseDetail ul li{
        padding:10px 20px; 
        border-bottom:1px solid #4e4e4e;
        overflow:hidden;
    }
    .chooseDetail ul li .leftbar{
        float:left;
        width:45%;
    }
    .chooseDetail ul li .leftbar p:first-child{
        font-size:16px;
        margin-bottom:10px;
    }
    .chooseDetail ul li .leftbar p:last-child{
        font-size:12px;
        color:#888;
    }
    .chooseDetail ul li .rightbar{
        float:right;
        width:55%;
        text-align: right;
    }
    .chooseDetail ul li .rightbar span{
        display:inline-block;
    }
    .chooseDetail ul li .rightbar .privilege{
        width: 15%;
        max-width: 25px;
        margin-right: 5px;
    }
    .chooseDetail ul li .rightbar .opration{
        width:20%;
        max-width: 35px;
    }
    .chooseDetail ul li .rightbar .goodsNum{
        padding-right: 8px;
    }
    .gonggao{
        height: 30px;
        padding:0 10px 0 42px;
        background:#282320 url(/images/ad/gonggao.png) no-repeat 5px center;
        background-size:32px;
    }
    .gonggao marquee{
        font-size: 12px;
        line-height: 30px;
        color: #fff;
    }
    .totalValue{
        position: absolute;
        left:67px;
        top:10px;
        right:75px;
        bottom:10px;
        border: 3px solid #A79A84;
        border-radius: 10px;
        margin-top: 1px;
    }



  #skuSelectorDiv.add {
    animation: addCart 1.1s ease-in-out;
    border:3px solid #A79A84;
    transform-origin:50%,50%;
    -webkit-transform-origin:100%,100%;
  }


  @keyframes addCart {
    40%{
       width: 15px;
      height: 15px;
      border-radius: 50%;
      color: #41464b;
    background:#A79A84;
      font-size: 12px;
    margin-left:50%;
    bottom:136px;
    transform:rotate(0deg);
    }

    100%{
      width: 15px;
      height: 15px;
    background:#A79A84;
      border-radius: 50%;
      color: #41464b;
      font-size: 12px;
      margin-left:40px;
    bottom:38px;
    transform:rotate(-720deg);
    }
  }
    .addressBanner {
        position:relative;
        padding:10px 10px 10px 100px;
        background:#0d0c0c;
    }
    .addressBanner .content,.addressBanner .storeNow{
        background-color:#323136;
        color:#fff;
        line-height:36px;
    }
    .addressBanner .content{
        position:relative;
        padding:0 45px;
        border-radius: 0 20px 20px 0;
    }
    .addressBanner .storeNow{
        position: absolute;
        left: 10px;
        top: 10px;
        font-size:10px;
        text-align:center;
        height: 36px;
        width: 85px;
        border-radius: 20px 0 0 20px;
    }
    .addressBanner .storeNow img{
        width:15px;
        right:5px;     
    }
    .addressBanner .content p{
        white-space:nowrap;
        text-overflow:ellipsis;
        font-size:10px;
        overflow:hidden;
    }
    .addressBanner img{
        position:absolute;
        width:20px;
        top:50%;
        right:15px;
        transform:translateY(-50%);
        -webkit-transform:translateY(-50%);
    }
    .addressBanner .content img:first-child{
        left:15px;
    }
    .chooseStore{
        display:none;
        position:fixed;
        width:100%;
        left:0;
        bottom:0;
        background-color:#2B2B2B;
        z-index:999;
    }
    .chooseStore li{
        line-height:50px;
        font-size:16px;
        text-align:center;
        color: #fff;
        background: #383838;
        border-bottom:1px solid #2B2B2B;
    }
    .chooseStore li:last-child{
        border:none;
        margin-top:10px;
    }
</style>
<div id="main">
    <!-- banner轮播图-->
    <div class="banner">
        
        <!-- 公告滚动条 -->
        <div role="orderAlert" class="gonggao">
            <marquee direction="left" behavior="scroll" scrollamount="2" scrolldelay="1" loop="-1">
                <asp:literal runat="server" id="litOrderAlert"></asp:literal>
            </marquee>
        </div>
        <div class="addressBanner" role="addressChose">
            <div class="storeNow" onclick="chooseStore(event)">
                <p>切换门店</p>
            </div>
            <div class="content">
                <img src="../images/ad/addressBanner-icon.png" /><p><asp:literal runat="server" id="litDefaultAddress"></asp:literal></p><img src="../images/ad/addressBanner-icon2.png" />
            </div>
        </div>
        <div class="swiper-container" id="banner">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
                    <img src="/images/ad/slider1.jpg" />
                </div>
                <div class="swiper-slide">
                    <img src="/images/ad/slider2.jpg" />
                </div>
            </div>
            <!-- Add Pagination -->
            <div class="swiper-pagination"></div>
        </div>
    </div>
    <!-- 商品列表 -->
    <div class="content">
        <ul id="categoryList"></ul>
        <div id="goodsList">
            <!--<div class="title"></div>-->
            <ul></ul>
        </div>
    </div>
    <!-- 购物车预览 -->
    <div class="shopCart" >
        <div role="clickshopCart">
            <div class="count">
                <img src="/images/ad/shopCart.png" style="width:35px;" />
                <span class="num" role="cartNum">0</span>
            </div>
            <!--<span class="total"><img src="/images/ad/total.png" /></span>-->
            <div class="totalValue">
                <span class="price">￥<i role="cartTotal">0</i></span>
                <span role="freeRoadPrice"></span>
            </div>
        </div>
        <span class="order" role="goOrder" >去下单</span>
    </div>
    <div class="chooseDetail" role="shoppingCartDiv" style="display:none">
        <span class="closeDiv" onclick="toggleShoppingCart('close');">关闭</span>
        <div class="numPrice"><span class="num" role="cartNum">0</span>份菜品，总价￥<span role="marketPriceToral">0</span></div>
        <ul>
        </ul>
        <div class="delivery">配送费<span class="deliveryMoney">￥<i role="roadPrice">0</i></span></div>
    </div>



    <ul class="chooseStore" role="storeSelect">
        <asp:literal runat="server" id="litStoreList"></asp:literal>
        <!--
        <li storeId="2409">广州兴盛路店</li>
        <li storeId="35">保利水城店</li>
        <li storeId="1488">深圳翻身店</li>
        <li storeId="1584">佛山九江店</li>
        <li storeId="1772">广州番禺店</li>
        <li storeId="1868">佛山瀚天店</li>
        <li storeId="2546">铂顿店</li>
        <li storeId="3102">奥斯迪工厂店</li>
        <li storeId="3489">重庆丰都店</li>
        <li onclick="cancel()">取消</li>
        -->
    </ul>
</div>
<div class="mask" onclick="cancel();"></div>
<div class="imgGroupBoxMask"></div>
<div class="imgGroupBox"></div>
<div id="skuSelectorDiv" stock="0" productId="0" skuId="0"></div> <div id="mask_layer"></div>
<input type="hidden" id="hidMinPrice" runat="server" clientidmode="static" />
<input type="hidden" id="hidFromUserId" runat="server" clientidmode="static" /><!--我的推广人id-->
<input type="hidden" id="hidUserDistance" runat="server" clientidmode="static" /><!--用户距离-->
<input type="hidden" id="hidUserStoreId" runat="server" clientidmode="static" /><!--门店id(clientuserid)-->
<input type="hidden" id="hidUserStoreName" runat="server" clientidmode="static" /><!--门店名-->





<script>
    var docEl = document.documentElement,
        resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
        recalc = function () {
            var clientWidth = docEl.clientWidth;
            if (!clientWidth) return;
            if (clientWidth <= 650) {
                docEl.style.fontSize = 12 * (clientWidth / 320) + 'px';
            } else {
                docEl.style.fontSize = 12 * (clientWidth / 420) + 'px';
            }
        };
    //绑定浏览器缩放与加载时间
    window.addEventListener(resizeEvt, recalc, false);
    document.addEventListener('DOMContentLoaded', recalc, false);

    var swiper = new Swiper('#banner', {
        nextButton: '.swiper-button-next',
        prevButton: '.swiper-button-prev',
        paginationClickable: true,
        spaceBetween: 0,
        centeredSlides: true,
        loop:true,
        autoplay: 5000,
        autoplayDisableOnInteraction: false
    });
//查看大图
    function getImgGroup(i, categoryId) {
        $('.imgGroupBoxMask,.imgGroupBox').show();
        $('#main').hide();
        var ajaxUrl = "http://" + window.location.host + "/api/StoreHandler.ashx?action=getProductsByCategoryId&categoryid=" + categoryId + "&storeid=" + $("#hidUserStoreId").val();
        $.ajax({
            type: 'get', dataType: 'json', timeout: 10000,
            url: ajaxUrl,
            success: function (e) {
                if (e.state === 0) {
                    var slide = "";
                    for (var j = 1; j < 6; j++) {
                        var src = e.data.dtproduct[i]["ImageUrl" + j];
                        if (src != "") {
                            slide += "<div class='swiper-slide'><img src='http://" + window.location.host + src + "' /></div>";
                        }
                    }
                    var html = '<div class="swiper-container" id="imgGroupBox"><div class="swiper-wrapper">' + slide + '</div><div class="swiper-pagination"></div></div>';
                    html += '<div class="ctrlbar"><span onclick="closeImgGroupBox()">关闭</span></div>';
                    $(".imgGroupBox").html(html);
                    var swiper2 = new Swiper('#imgGroupBox', {
                        pagination: '.swiper-pagination',
                        nextButton: '.swiper-button-next',
                        prevButton: '.swiper-button-prev',
                        paginationClickable: true,
                        spaceBetween: 30,
                        centeredSlides: true
                    });
                }
                else {
                    alert("error");
                }
            }
        });
    }

    function closeImgGroupBox() {
        $('#main').show();
        $('.imgGroupBoxMask,.imgGroupBox').hide();
    }

    function chooseStore(event) {
        $(".mask,.chooseStore").show();
        event.stopPropagation();
    }

    function cancel() {
        $(".mask,.chooseStore").hide();
        event.stopPropagation();
    }
</script>




<hi:Common_ClearFooter runat="server" />
